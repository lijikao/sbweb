# Gulp Bufferify

A package for gulp developer to catch pipe stream content and modify it easily.

## Install

```
npm install --save-dev gulp-bufferify
```

## Usage

```
import GulpBufferify from 'gulp-bufferify'
import gulp from 'gulp'

gulp.src('./some.html')
    .pipe(GulpBufferify((content, file, context) => {
        content = content.toString()
        content = content.replace(/aws/g, 'gogo')
        return content
    }))
    .pipe(gulp.dest('.'))
```

Pass `GulpBufferify(callback)` into .pipe.

## Options

`callback` is a function, with three parameters.

**content**

The buffer of the file have been convert to string with `toString()`. However this is always useful with text files, but not good for images, audios and videos. If you want to use original content of the file, use `file.contents` to use it.

You can change the content, and return new content which will be used in next pipe in callback function. If no content returned, original content will be used in next pipe.

**file**

Buffer file, use `file.path` `file.cwd` `file.base` to get file info which is from previous pipe (so, gulp-rename will make sense, the position of this pipe is important).

For example, you can use this to change the file name and relative path. Previous `content` is always equal `file.contents` as metioned before.

**context**

Use this to modify pipe stream. For example:

```
gulp.src('./file.scss')
    .pipe(GulpBufferify((content, file, context) => {
        let newfile = file.clone() // you can use clone property
        newfile.path = '...'
        newfile.contents = new Buffer(...)
        context.push(newfile)
    }))
```

Do like this, a new file will be added into pipe stream.

## Generator

This application is generated by Componer.
If you want to modify the source code, do like this:

```
# install componer
npm i -g gulp-cli bower componer
# create project
mkdir your-project && cd your-project

# get gulp-bufferify from registry
componer init -I
componer clone gulp-bufferify
componer install gulp-bufferify
# to test this package
componer test gulp-bufferify
```

After you modified source code in src directory, run:

```
componer build gulp-bufferify
```

To learn more about componer, read [this](https://github.com/tangshuang/componer).
